---
title: "代码的整洁之道"
date: "2023-06-06 23:57:57"
categories:
  - Recommend
---

代码的整洁之道。

---


> Code Aesthetic emmm我用 js 举例吧

#### 计算机科学只有两件难事

**缓存失效和取名**

##### 形成良好的命名习惯

- 不应当用单个字母来命名
- ts的出现变量名上写类型就不再需要
- 变量名带上单位

```
void execute(int delay)
void execute(int delaySeconds)
```

### 组合优与继承

#### 继承

当有一个类有你想要复用的功能时，继承便会发生。有一说一 js 的继承只是原型链的语法糖，当那个类需要修改时，我们就必须修改所有的类，这样重构费时费力。

一旦需要修改代码，继承就崩塌了，修改是完美设计的天敌，继承很容易造成自讨苦吃的局面。

#### 组合

不通过继承复用代码就是在组合，当然这也不是代码复用，就好像 “依赖注入” 把要用到的东西以接口形式作为参数传进来，我不会说继承是地狱，但我表示我基本上不会在我的代码中用到继承。

**组合也非完美无瑕你会写出大量套路代码，需要初始化各种内部类型**

> 如果你在处理现有，大量重复代码的系统，并且只需要改某一个地方，那么继承可能会很好用。

#### 抽象

识别并提取重复的部分，我们会陷入 “代码重复不好” “抽象越多越好” 的思维模式中，而没有意识到抽象是有得有失的，耦合便是失 。

在试图修改过渡耦合的系统时，他们必定能体会到错中复杂关系网，设计软件时，你无法体会耦合带来的影响，抽象程度越高，耦合也就越深。

#### 我认为你不应该写注释

wtf，我觉得如果用 ts 的话应该不用吧

人们在改代码的时候时常忘记更新注释和注释不同的是，我们有工具防止代码出现 bug ，你们会为了看懂代码去看注释吗？我要看的是代码文档。文档对系统的高层架构和公共 api 进行了阐述，文档和注释的不同之处在与注释解释代码原理。

#### 不嵌套主义者

有两种方法可以消除嵌套，**提炼** 把函数的一部分提炼成一个单独的函数，另一种是反转，即反转条件使函数尽早返回，我们可以把内循环提炼成一个函数。

#### 过早优化

说起这个，我想起网上有探讨 for循环，和foreach，map，哪个销毁性能，其实完全没必要，有个 JS 大佬就说优化应该是主观性或者是说在系统架构上，甚至是在准备写 PPT 项目，的时候，就应该知道了。

**过早优化是万恶之源**

大部分关于性能的讨论都是在浪费时间，并不是说性能不重要，而是因为人们对性能看得太重太重了，性能只是这个权衡，三角形的一角，速度指的是增加新特性的速度，适应性指的是系统对新需求的适应能力，一个功能完备的游戏在冲刺交付日期时应该专注与性能，为了尽可能地压榨性能，放弃一点适应性和增加新特性的速度应该不是问题。

- 系统性能

- 微观性能（调优的性能）
这只涉及单个模块或函数，过早优化常常在微观性能上表现。

> 如果研究那个更快能让你开心那就去吧

##### 影响性能的因素很多但优化的方法只有一种

- 测试
- 尝试
- 再测试

数据结构的选择是目前最重要的一点，选择合适的数据结构能够让结果更优，在处理性能问题时我会首先考虑优化到 80% 的做法，只有切换数据结构才能做到这么多。

使用性能分析工具 比如前端的 灯塔,实在不行就进行底层分析，
